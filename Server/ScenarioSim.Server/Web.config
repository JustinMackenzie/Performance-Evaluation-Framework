<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=301879
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\ScenarioSim.mdf;Initial Catalog=AccountsContext;Integrated Security=True" providerName="System.Data.SqlClient" />
    <add name="ScenarioContext" connectionString="mongodb://127.0.0.1" />
  </connectionStrings>
  <appSettings></appSettings>
  <system.web>
    <authentication mode="None" />
    <compilation debug="true" targetFramework="4.5.2" />
    <httpRuntime targetFramework="4.5.2" />
  </system.web>
  <system.webServer>
    <modules>
      <remove name="FormsAuthentication" />
    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.1.0" newVersion="3.0.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.OAuth" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.1.0" newVersion="3.0.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.Cookies" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.1.0" newVersion="3.0.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.1.0" newVersion="3.0.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" culture="neutral" publicKeyToken="30ad4fe6b2a6aeed" />
        <bindingRedirect oldVersion="0.0.0.0-9.0.0.0" newVersion="9.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Optimization" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="1.1.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-1.5.2.14234" newVersion="1.5.2.14234" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="AutoMapper" publicKeyToken="be96cd2c38ef1005" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.1.1.0" newVersion="5.1.1.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <!--Aliases-->
    <alias alias="ISchemaManager" type="ScenarioSim.Services.ScenarioCreator.ISchemaManager, ScenarioSim.Services.ScenarioCreator" />
    <alias alias="IActorManager" type="ScenarioSim.Services.ScenarioCreator.IActorManager, ScenarioSim.Services.ScenarioCreator" />
    <alias alias="IScenarioManager" type="ScenarioSim.Services.ScenarioCreator.IScenarioManager, ScenarioSim.Services.ScenarioCreator" />
    <alias alias="IAssetManager" type="ScenarioSim.Services.ScenarioCreator.IAssetManager, ScenarioSim.Services.ScenarioCreator" />
    <alias alias="IProgramManager" type="ScenarioSim.Services.ScenarioCreator.IProgramManager, ScenarioSim.Services.ScenarioCreator" />
    <alias alias="ILogger" type="ScenarioSim.Services.Logging.ILogger, ScenarioSim.Services.Logging" />
    <alias alias="ISchemaRepository" type="ScenarioSim.Core.Interfaces.ISchemaRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IActorRepository" type="ScenarioSim.Core.Interfaces.IActorRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IScenarioRepository" type="ScenarioSim.Core.Interfaces.IScenarioRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IAssetRepository" type="ScenarioSim.Core.Interfaces.IAssetRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IProgramRepository" type="ScenarioSim.Core.Interfaces.IProgramRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IPerformanceManager" type="ScenarioSim.Services.PerformanceManagement.IPerformanceManager, ScenarioSim.Services.PerformanceManagement" />
    <alias alias="IPerformerManager" type="ScenarioSim.Services.PerformanceManagement.IPerformerManager, ScenarioSim.Services.PerformanceManagement" />
    <alias alias="IScenarioPerformanceRepository" type="ScenarioSim.Core.Interfaces.IScenarioPerformanceRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IPerformerRepository" type="ScenarioSim.Core.Interfaces.IPerformerRepository, ScenarioSim.Core.Interfaces" />
    <alias alias="IMapper" type="ScenarioSim.Services.Mapping.IMapper, ScenarioSim.Services.Mapping" />
    
    <!--Container-->
    <container>
      <register type="ILogger" mapTo="ScenarioSim.Infrastructure.Logging.NLog.NLogLogger, ScenarioSim.Infrastructure.Logging.NLog" />
      <register type="ISchemaRepository" mapTo="ScenarioSim.Infrastructure.MongoDbRepositories.MongoDbSchemaRepository, ScenarioSim.Infrastructure.MongoDbRepositories">
        <constructor>
          <param name="connectionStringOrName" value="ScenarioContext" />
          <param name="databaseName" value="scenario-context" />
        </constructor>
      </register>
      <register type="IActorRepository" mapTo="ScenarioSim.Infrastructure.MongoDbRepositories.MongoDbActorRepository, ScenarioSim.Infrastructure.MongoDbRepositories">
        <constructor>
          <param name="connectionStringOrName" value="ScenarioContext" />
          <param name="databaseName" value="scenario-context" />
        </constructor>
      </register>
      <register type="IScenarioRepository" mapTo="ScenarioSim.Infrastructure.MongoDbRepositories.MongoDbScenarioRepository, ScenarioSim.Infrastructure.MongoDbRepositories">
        <constructor>
          <param name="connectionStringOrName" value="ScenarioContext" />
          <param name="databaseName" value="scenario-context" />
        </constructor>
      </register>
      <register type="IAssetRepository" mapTo="ScenarioSim.Infrastructure.MongoDbRepositories.MongoDbAssetRepository, ScenarioSim.Infrastructure.MongoDbRepositories">
        <constructor>
          <param name="connectionStringOrName" value="ScenarioContext" />
          <param name="databaseName" value="scenario-context" />
        </constructor>
      </register>
      <register type="IProgramRepository" mapTo="ScenarioSim.Infrastructure.MongoDbRepositories.MongoDbProgramRepository, ScenarioSim.Infrastructure.MongoDbRepositories">
        <constructor>
          <param name="connectionStringOrName" value="ScenarioContext" />
          <param name="databaseName" value="scenario-context" />
        </constructor>
      </register>
      <register type="IScenarioPerformanceRepository" mapTo="ScenarioSim.Infrastructure.MongoDbRepositories.MongoDbScenarioPerformanceRepository, ScenarioSim.Infrastructure.MongoDbRepositories">
        <constructor>
          <param name="connectionStringOrName" value="ScenarioContext" />
          <param name="databaseName" value="scenario-context" />
        </constructor>
      </register>
      <register type="IPerformerRepository" mapTo="ScenarioSim.Server.Models.PerformerRepository, ScenarioSim.Server" />
      <register type="ISchemaManager" mapTo="ScenarioSim.Infrastructure.ScenarioCreator.SchemaManager, ScenarioSim.Infrastructure.ScenarioCreator">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="ISchemaRepository" />
        </constructor>
      </register>
      <register type="IActorManager" mapTo="ScenarioSim.Infrastructure.ScenarioCreator.ActorManager, ScenarioSim.Infrastructure.ScenarioCreator">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="IActorRepository" />
        </constructor>
      </register>
      <register type="IScenarioManager" mapTo="ScenarioSim.Infrastructure.ScenarioCreator.ScenarioManager, ScenarioSim.Infrastructure.ScenarioCreator">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="IScenarioRepository" />
        </constructor>
      </register>
      <register type="IAssetManager" mapTo="ScenarioSim.Infrastructure.ScenarioCreator.AssetManager, ScenarioSim.Infrastructure.ScenarioCreator">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="IAssetRepository" />
        </constructor>
      </register>
      <register type="IProgramManager" mapTo="ScenarioSim.Infrastructure.ScenarioCreator.ProgramManager, ScenarioSim.Infrastructure.ScenarioCreator">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="IProgramRepository" />
        </constructor>
      </register>
      <register type="IPerformanceManager" mapTo="ScenarioSim.Infrastructure.PerformanceManagement.PerformanceManager, ScenarioSim.Infrastructure.PerformanceManagement">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="IScenarioPerformanceRepository" />
          <param name="scenarioRepository" type="IScenarioRepository" />
        </constructor>
      </register>
      <register type="IPerformerManager" mapTo="ScenarioSim.Infrastructure.PerformanceManagement.PerformerManager, ScenarioSim.Infrastructure.PerformanceManagement">
        <constructor>
          <param name="logger" type="ILogger" />
          <param name="repository" type="IPerformerRepository" />
        </constructor>
      </register>
      <register type="ScenarioSim.Server.Controllers.AccountController, ScenarioSim.Server" mapTo="ScenarioSim.Server.Controllers.AccountController, ScenarioSim.Server">
        <constructor />
      </register>
      <register type="IMapper" mapTo="ScenarioSim.Infrastructure.AutoMapperMapping.AutoMapperMapper, ScenarioSim.Infrastructure.AutoMapperMapping"/>
    </container>
  </unity>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:6 /nowarn:1659;1699;1701" />
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:14 /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
    </compilers>
  </system.codedom>
</configuration>